<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BENTO Admin</title>

  <!-- Telegram Mini App API -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    :root {
      --bg: #0e0e11;
      --card: #1c1c22;
      --accent: #8774e1;
      --text: #ffffff;
      --muted: #9aa0a6;
      --danger: #ff6b6b;
    }

    * {
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont;
    }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
    }

    #app {
      padding: 16px;
    }

    .header {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 16px;
    }

    .card {
      background: var(--card);
      border-radius: 16px;
      padding: 16px;
      margin-bottom: 14px;
    }

    .user {
      font-size: 14px;
      color: var(--muted);
      margin-top: 4px;
    }

    button {
      width: 100%;
      padding: 14px;
      margin-top: 10px;
      border-radius: 14px;
      border: none;
      background: var(--accent);
      color: white;
      font-size: 16px;
    }

    .menu button {
      background: #2a2a33;
      text-align: left;
    }

    .menu button:hover {
      background: #333344;
    }

    .exit {
      background: #2a1d1d !important;
      color: var(--danger);
    }

    .back {
      color: var(--accent);
      font-size: 15px;
      margin-bottom: 10px;
      cursor: pointer;
    }

    input {
      width: 100%;
      padding: 16px;
      font-size: 20px;
      border-radius: 14px;
      border: none;
      background: #2a2a33;
      color: white;
      text-align: center;
      letter-spacing: 6px;
    }
  </style>
</head>

<body>
  <div id="app">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // üîê –ù–ê–°–¢–†–û–ô–ö–ò
    const OWNER_IDS = [8354848795]; // ‚Üê –í–°–¢–ê–í–¨ –°–í–û–ô TG ID
    const PIN_CODE = "2580";       // ‚Üê –ó–ê–î–ê–ô –°–í–û–ô PIN

    const user = tg.initDataUnsafe?.user;
    const app = document.getElementById("app");

    // ‚ùå –ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if (!user) {
      app.innerHTML = "‚ùå –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏";
      tg.close();
    }

    // ‚ùå –ù–µ owner
    if (!OWNER_IDS.includes(user.id)) {
      app.innerHTML = "‚õî –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω";
      setTimeout(() => tg.close(), 1500);
      throw new Error("Access denied");
    }

    // üîê PIN —ç–∫—Ä–∞–Ω
    showPin();

    function showPin() {
      app.innerHTML = `
        <div class="header">üîê –í–≤–µ–¥–∏—Ç–µ PIN</div>
        <div class="card">
          <input
            id="pin"
            type="password"
            inputmode="numeric"
            maxlength="6"
            placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
          />
          <button onclick="checkPin()">–í–æ–π—Ç–∏</button>
        </div>
      `;
    }

    function checkPin() {
      const value = document.getElementById("pin").value;

      if (value === PIN_CODE) {
        renderMain();
      } else {
        app.innerHTML = "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π PIN";
        setTimeout(() => tg.close(), 1500);
      }
    }

    // üëë –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ
    function renderMain() {
      app.innerHTML = `
        <div class="header">üëë BENTO ADMIN</div>

        <div class="card">
          <div><b>${user.first_name}</b></div>
          <div class="user">ID: ${user.id}</div>
        </div>

        <div class="card menu">
          <button onclick="openSection('applications')">üì® –ó–∞—è–≤–∫–∏</button>
          <button onclick="openSection('admins')">üë• –ê–¥–º–∏–Ω—ã</button>
          <button onclick="openSection('blacklist')">‚õî –ë–ª—ç–∫–ª–∏—Å—Ç</button>
          <button onclick="openSection('settings')">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
          <button class="exit" onclick="tg.close()">üö™ –í—ã–π—Ç–∏</button>
        </div>
      `;
    }

    // üìÇ –†–ê–ó–î–ï–õ–´
    function openSection(section) {
      app.innerHTML = `
        <div class="back" onclick="renderMain()">‚Üê –ù–∞–∑–∞–¥</div>
        <div class="card">
          <b>–†–∞–∑–¥–µ–ª:</b> ${section}
        </div>
      `;
    }
  </script>
</body>
</html>
